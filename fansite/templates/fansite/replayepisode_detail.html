{% extends "base_generic.html" %}

{% load static %}

{% block title %}
    <title>Game Informer Fansite - Replay - {{ replayepisode.title }}</title>
{% endblock %}

{% block custom-css %}
    <link rel="stylesheet" href="{% static 'css/replayepisode_detail.css' %}">
{% endblock %}

{% block content %}
    <div id="video-player">
        <iframe
            frameborder="0" 
            allowfullscreen="1" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
            title="YouTube video player" 
            width="640"
            height="360"
            src="https://www.youtube.com/embed/{{ replayepisode.youtube_video.youtube_id }}"
        ></iframe>
    </div>

    <div id="primary-info">
        <div id="primary-info-header">
            <h1>{{ replayepisode.title }}</h1>
            <p>S{{ season_num }} E{{ season_episode_num }} (#{{ replayepisode.number }})</p>
        </div>

        <div id="primary-info-details">
            <div id="primary-info-details-counts">
                <p><i class="fas fa-eye"></i> {{ replayepisode.youtube_video.views }} views</p>
                <p><i class="fas fa-thumbs-up"></i> {{ replayepisode.youtube_video.likes }}</p>
            </div>
            <div id="primary-info-details-time">
                <p><i class="fas fa-calendar-alt"></i> {{ replayepisode.airdate }}</p>
                <p><i class="fas fa-clock"></i> {{ replayepisode.runtime }}</p>
            </div>
        </div>
    </div>

    <hr>

    <div id="people-in-episode">
        <p><strong>Host: </strong>{{ replayepisode.host }}</p>
        <p><strong>Featuring: </strong>{{ replayepisode.display_featuring }}</p>
    </div>

    <hr>

    <!-- <div class="thumbnail-container">
        <div class="thumbnail">
            <img
                srcset="
                    {% for thumbnail in replayepisode.youtube_video.thumbnails.all %}
                        {{ thumbnail.create_srcset_entry }}{% if not forloop.last %},{% endif %}
                    {% endfor %}
                "
                src="{{ replayepisode.youtube_video.thumbnails }}"
                alt="Thumbnail image for Replay episode titled '{{ replayepisode.title }}'"
            >
        </div>
    </div>
    <hr> -->

    <h2>Main Segment Games:</h2>
    <ul>
        {% for game in replayepisode.main_segment_games.all %}
            <li><a href="{{ game.get_absolute_url }}">{{ game.name }}</a></li>
        {% endfor %}
    </ul>

    <hr>

    <h2>Other Segments:</h2>
    <ul>
        {% for segment in replayepisode.other_segments.all %}
            <li>{{ segment }}</li>
        {% endfor %}
    </ul>

    <hr>

    <h2>Description:</h2>
    {% for entry in replayepisode.headings.description %}
        <p>{{ entry }}</p>
    {% endfor %}

    {% for key, value in replayepisode.headings.items %}
        {% if key != 'description' %}
            <h2>{{ key }}:</h2>
            {% for item in value %}
                <p>{{ item }}</p>
            {% endfor %}
        {% endif %}
    {% endfor %}

    <hr>

    <h2>{{ replayepisode.article.title }}</h2>
    <span>by {{ replayepisode.article.author }} on {{ replayepisode.article.datetime }}</span>
    <p>{{ replayepisode.article.content }}</p>

    <hr>

    <h2>External Links:</h2>
    <ul>
        {% for external_link in replayepisode.external_links.all %}
            <li><a href="{{ external_link.url }}" target="_blank">{{ external_link.title }}</a> on {{ external_link.getLinkSource }}</li>
        {% endfor %}
    </ul>
{% endblock %}